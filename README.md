# 江西酒店管理系统 (Jiangxi Hotel Management System)

现代化的酒店管理系统，集成了客房点餐、订单管理、财务管理和用户权限控制等功能。基于Vercel Edge Runtime的无服务器架构，支持多数据库后端。

## 🚀 核心功能

### 客房点餐系统
- **客房送餐**: 客人通过房间二维码扫码点餐
- **订单管理**: 完整订单生命周期（待接单→制作中→已送达→已完成）
- **厨房显示**: 实时厨房订单显示和处理
- **多语言支持**: 中文和菲律宾语界面

### 酒店运营系统
- **房间管理**: 64间房间（8201-8232, 8301-8332）状态跟踪
- **菜单管理**: 菜品分类、价格管理、库存关联
- **支付管理**: 支持现金、GCash、Maya等多种支付方式

### 财务管理系统
- **支出记录**: 财务支出分类统计
- **挂账管理**: 企业账户和信用额度管理
- **营收统计**: 收入分析和财务报告

### 用户权限系统
- **角色管理**: 管理员、经理、员工多级权限
- **权限控制**: 基于角色的访问控制
- **用户认证**: 安全登录认证

## 🛠️ 技术栈与架构

### 前端技术栈
- **React 18**: 组件化开发框架
- **TypeScript**: 类型安全
- **Tailwind CSS**: 响应式样式
- **Lucide React**: 图标库
- **Recharts**: 数据可视化

### 后端技术栈
- **Vercel Edge Functions**: 无服务器API端点
- **Edge Runtime**: 高性能边缘计算
- **统一API网关**: 泛型CRUD操作处理

### 数据存储架构
- **数据库抽象层**: 支持多种后端（memory、neon）
- **内存数据库**: 开发测试环境
- **Neon PostgreSQL**: 生产环境数据持久化
- **自动验证**: 每个实体类型的数据验证

### 构建与部署
- **Vite**: TypeScript/JSX转译
- **Importmap**: CDN依赖加载（无需node_modules）
- **极小构建**: 构建产物~35KB（gzip ~12KB）

## 🌐 H5架构特性

### 响应式设计
- **移动端优先**: 适配各种屏幕尺寸
- **二维码集成**: 房间专属点餐二维码
- **离线支持**: 本地缓存机制

### 用户体验
- **多语言界面**: 中文/菲律宾语自动切换
- **实时通知**: 桌面和音频通知
- **快速加载**: CDN依赖和缓存优化

## ☁️ 无服务器架构

### Vercel部署
- **Edge Runtime**: 全球分布式部署
- **自动扩展**: 按需扩展，无需服务器维护
- **环境变量**: 安全配置管理

### API服务
- **统一网关**: `/api/index.ts`处理所有CRUD操作
- **CORS支持**: 跨域请求支持
- **安全认证**: API访问权限控制

## 📊 数据库表结构

### 核心数据表
1. **dishes** - 菜品管理
2. **hotel_rooms** - 酒店房间
3. **orders** - 订单管理
4. **inventory** - 库存管理
5. **payment_methods** - 支付方式
6. **system_settings** - 系统设置
7. **expenses** - 财务支出
8. **sign_bill_accounts** - 挂账账户
9. **users** - 用户管理
10. **partner_accounts** - 合作伙伴账户
11. **system_dictionary** - 系统词典
12. **categories** - 菜品分类

### 数据验证
- **内置验证**: 每个实体类型的数据验证规则
- **自动时间戳**: createdAt/updatedAt自动管理
- **数据完整性**: 严格的数据类型和格式验证

## 🔐 路由状态管理

### 前端状态管理
- **React Hooks**: useAppData、useCloudSync等自定义Hook
- **数据缓存**: 5分钟缓存机制
- **状态同步**: 实时数据更新

### 权限路由
- **角色控制**: admin/manager/staff不同权限级别
- **页面访问**: 基于角色的页面访问控制
- **会话管理**: sessionStorage持久化

## ⚙️ 环境变量配置

### 必需环境变量
```bash
# 数据库配置
DB_TYPE=memory/neon
NEON_CONNECTION_STRING=your_neon_connection_string

# 管理员配置
VITE_ADMIN_USER=admin
VITE_ADMIN_PASS=admin123

# 应用配置
VITE_APP_URL=your_app_url
```

### 安全配置
- **API认证**: Bearer Token保护敏感操作
- **环境隔离**: 开发/生产环境不同配置
- **日志管理**: 生产环境敏感信息脱敏

## 🏗️ API函数服务

### 核心API端点
- **`/api/auth/login`** - 用户认证
- **`/api/db-config`** - 数据库配置
- **`/api/test-connection`** - 连接测试
- **`/api/seed`** - 数据初始化
- **`/api/{entity}`** - 通用CRUD操作

### 业务API
- **`/api/orders`** - 订单管理
- **`/api/dishes`** - 菜品管理
- **`/api/hotel_rooms`** - 房间管理
- **`/api/users`** - 用户管理
- **`/api/print`** - 云打印服务

## 📈 竞争优势

### 技术优势
- **无服务器架构**: 无需服务器维护，自动扩展
- **边缘计算**: 全球低延迟访问
- **轻量化部署**: 极小构建产物，快速加载
- **多数据库支持**: 开发测试与生产环境灵活切换

### 功能优势
- **一体化管理**: 点餐、客房、财务统一平台
- **多语言支持**: 中文/菲律宾语界面
- **移动优先**: H5响应式设计
- **实时同步**: 数据云端同步备份

### 商业优势
- **零运维成本**: 完全托管服务
- **快速部署**: 代码推送自动部署
- **按需付费**: 无服务器架构成本优化
- **安全可靠**: 多重安全验证和备份机制

## 🚀 快速开始

### 开发环境
```bash
# 安装依赖
npm install

# 启动开发服务器
npm run dev

# 构建生产版本
npm run build
```

### 生产部署
```bash
# 部署到Vercel
vercel deploy

# 初始化系统数据
curl -X POST https://your-app.vercel.app/api/seed
```

## 📋 系统初始化

### 数据初始化
- **64间酒店房间**: 8201-8232, 8301-8332
- **默认菜品**: 预设菜单分类和菜品
- **支付方式**: 配置默认支付选项
- **系统设置**: 基础系统配置

## 🛡️ 安全特性

- **API认证**: 敏感操作需要认证
- **数据验证**: 输入数据严格验证
- **权限控制**: 基于角色的访问控制
- **安全头**: 自动添加安全HTTP头
- **日志审计**: 操作日志记录

## 📊 版本历史

- **v2.1.0**: 运维增强版，增加云同步功能
- **v2.0.0**: 完整重构，支持多数据库后端
- **v1.0.0**: 初始版本，基础酒店管理功能

## 🤝 贡献

欢迎提交Issue和Pull Request来帮助改进项目。

## 📄 许可证

本项目采用MIT许可证。