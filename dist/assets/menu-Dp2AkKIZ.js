import{dbManager as n}from"./database-sHUWp0Re.js";const o={async getCategories(){return await n.getDatabase().getAll("categories")},async getCategory(e){return await n.getDatabase().get(`categories:${e}`)},async createCategory(e){const i=n.getDatabase(),t={...e,id:`cat_${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await i.create("categories",t)},async updateCategory(e,i){const t=n.getDatabase(),a=await t.get(`categories:${e}`);if(!a)throw new Error(`Category with id ${e} not found`);const r={...a,...i,id:e,updatedAt:new Date().toISOString()};return await t.update("categories",e,r)},async deleteCategory(e){return await n.getDatabase().remove("categories",e)},async getDishes(e){let t=await n.getDatabase().getAll("dishes");if(e){if(e.category&&(t=t.filter(a=>a.category===e.category)),e.search){const a=e.search.toLowerCase();t=t.filter(r=>r.name.toLowerCase().includes(a)||r.description&&r.description.toLowerCase().includes(a))}e.active!==void 0&&(t=t.filter(a=>a.available===e.active))}return t},async getDish(e){return await n.getDatabase().get(`dishes:${e}`)},async createDish(e){const i=n.getDatabase(),t={...e,id:`dish_${Date.now()}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return await i.create("dishes",t)},async updateDish(e,i){const t=n.getDatabase(),a=await t.get(`dishes:${e}`);if(!a)throw new Error(`Dish with id ${e} not found`);const r={...a,...i,id:e,updatedAt:new Date().toISOString()};return await t.update("dishes",e,r)},async deleteDish(e){return await n.getDatabase().remove("dishes",e)},async initializeDefaultMenu(){const e=n.getDatabase();if((await e.getAll("categories")).length>0)return;const t=[{name:"主食",name_en:"Staple Food / Rice",description:"饭、面、馒头",sortOrder:1,active:!0},{name:"特色川菜",name_en:"Sichuan Specialties",description:"招牌热菜",sortOrder:2,active:!0},{name:"凉菜",name_en:"Cold Dishes / Appetizers",description:"拍黄瓜、拌面",sortOrder:3,active:!0},{name:"汤类",name_en:"Soups",description:"各种汤",sortOrder:4,active:!0},{name:"饮品酒水",name_en:"Drinks & Beverages",description:"可乐、啤酒、水",sortOrder:5,active:!0},{name:"烟草杂项",name_en:"Cigarettes & Others",description:"烟、日用品",sortOrder:6,active:!0}];for(const r of t)await e.create("categories",{...r,id:`cat_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()});const a=[{name:"白米饭",name_en:"Steamed Rice",category:"主食",price:50,active:!0,available:!0,description:"香喷喷的白米饭",image:"",ingredients:["大米"],tags:["主食","米饭"]},{name:"扬州炒饭",name_en:"Yang Chow Fried Rice",category:"主食",price:280,active:!0,available:!0,description:"经典扬州风味炒饭",image:"",ingredients:["米饭","鸡蛋","火腿","虾仁"],tags:["主食","炒饭"]},{name:"宫保鸡丁",name_en:"Kung Pao Chicken",category:"特色川菜",price:450,active:!0,available:!0,description:"经典的川菜，酸甜微辣",image:"",ingredients:["鸡胸肉","花生米","辣椒"],tags:["川菜","热菜"]},{name:"麻婆豆腐",name_en:"Mapo Tofu",category:"特色川菜",price:350,active:!0,available:!0,description:"正宗川菜，麻辣鲜香",image:"",ingredients:["豆腐","肉末","豆瓣酱"],tags:["川菜","热菜"]},{name:"回锅肉",name_en:"Twice-Cooked Pork Slice",category:"特色川菜",price:480,active:!0,available:!0,description:"川菜经典，肥而不腻",image:"",ingredients:["五花肉","青椒","蒜苗"],tags:["川菜","热菜"]},{name:"拍黄瓜",name_en:"Smashed Cucumber Salad",category:"凉菜",price:200,active:!0,available:!0,description:"清爽开胃的凉菜",image:"",ingredients:["黄瓜","蒜","醋"],tags:["凉菜","开胃菜"]},{name:"矿泉水",name_en:"Mineral Water",category:"饮品酒水",price:40,active:!0,available:!0,description:"纯净矿泉水",image:"",ingredients:["水"],tags:["饮品","水"]},{name:"可口可乐",name_en:"Coke (Can)",category:"饮品酒水",price:60,active:!0,available:!0,description:"经典可乐",image:"",ingredients:["碳酸水","糖","焦糖色","磷酸","天然香料","咖啡因"],tags:["饮品","碳酸饮料"]},{name:"青岛啤酒",name_en:"Tsingtao Beer",category:"饮品酒水",price:120,active:!0,available:!0,description:"清爽啤酒",image:"",ingredients:["水","大麦芽","啤酒花","酵母"],tags:["饮品","酒水"]}];for(const r of a)await e.create("dishes",{...r,id:`dish_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()})}};export{o as menuAPI};
