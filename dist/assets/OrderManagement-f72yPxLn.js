import{j as e,O as s}from"./index-BV8Zipq2.js";import{r as x}from"./react-vendor-C14am9Lm.js";import{P as w}from"./printer-DXAaJEWD.js";import{C as m,w as I,x as v,y as M,z as k,d as L,E as b,J as z,K as C,R as K,N as R,Q as B,g as G,W as O,j as V,O as $,M as U,B as W}from"./lucide-CwzgdtcU.js";import"./aws-sdk-BT5ufFbJ.js";import"./recharts-wRm9IGXD.js";const J=({orders:u,setOrders:c})=>{var N;const[i,g]=x.useState("All"),[A,d]=x.useState(!1),[o,h]=x.useState(null),r=(t,a)=>{if(a===s.PAID){h(t),d(!0);return}c(l=>l.map(n=>n.id===t?{...n,status:a}:n))},E=t=>{o&&(c(a=>a.map(l=>{if(l.id===o){const T=l.source==="TAKEOUT"?s.COMPLETED:s.SERVED,y={...l,status:T,paymentMethod:t};return w.printOrder(y),y}return l})),d(!1),h(null))},p=t=>{w.printOrder(t)},S=()=>{const t={id:`ORD-${Date.now().toString().slice(-4)}`,tableNumber:["A1","A2","B1","C3","VIP1"][Math.floor(Math.random()*5)],source:"LOBBY",items:[{dishId:"99",dishName:"Test Item / 测试菜品",quantity:1,price:500}],status:s.PENDING,totalAmount:500,createdAt:new Date().toISOString(),notes:"System Test Order"};c(a=>[t,...a])},f=t=>{switch(t){case s.PENDING:return{label:"待处理 Pending",tagalog:"Naghihintay",color:"text-orange-600 bg-orange-50 border-orange-200"};case s.COOKING:return{label:"烹饪中 Cooking",tagalog:"Nagluluto",color:"text-blue-600 bg-blue-50 border-blue-200"};case s.SERVED:return{label:"已上菜 Served",tagalog:"Nai-serve na",color:"text-green-600 bg-green-50 border-green-200"};case s.PAID:return{label:"已支付 Paid",tagalog:"Bayad na",color:"text-emerald-600 bg-emerald-50 border-emerald-200"};case s.COMPLETED:return{label:"已完成 Completed",tagalog:"Tapos na",color:"text-slate-600 bg-slate-100 border-slate-200"};case s.CANCELLED:return{label:"已取消 Cancelled",tagalog:"Kinansela",color:"text-red-600 bg-red-50 border-red-200"};default:return{label:t,tagalog:"",color:"text-slate-600"}}},D=t=>{switch(t){case"ROOM_SERVICE":return e.jsxs("span",{className:"flex items-center gap-1 bg-orange-100 text-orange-700 px-2 py-0.5 rounded text-xs font-bold",children:[e.jsx(W,{size:12})," 客房 Room"]});case"KTV":return e.jsxs("span",{className:"flex items-center gap-1 bg-purple-100 text-purple-700 px-2 py-0.5 rounded text-xs font-bold",children:[e.jsx(U,{size:12})," KTV"]});case"TAKEOUT":return e.jsxs("span",{className:"flex items-center gap-1 bg-blue-100 text-blue-700 px-2 py-0.5 rounded text-xs font-bold",children:[e.jsx($,{size:12})," 外卖 Takeout"]});default:return e.jsxs("span",{className:"flex items-center gap-1 bg-slate-100 text-slate-700 px-2 py-0.5 rounded text-xs font-bold",children:[e.jsx(V,{size:12})," 堂食 Dine-in"]})}},j=u.filter(t=>i==="All"||t.status===i).sort((t,a)=>new Date(a.createdAt).getTime()-new Date(t.createdAt).getTime()),P=[{id:"CASH",label:"现金",enLabel:"Cash",icon:b,color:"bg-green-100 text-green-700"},{id:"ALIPAY",label:"支付宝",enLabel:"Alipay",icon:R,color:"bg-blue-100 text-blue-600"},{id:"WECHAT",label:"微信支付",enLabel:"WeChat",icon:B,color:"bg-emerald-100 text-emerald-600"},{id:"USDT",label:"USDT",enLabel:"Crypto",icon:G,color:"bg-teal-100 text-teal-600"},{id:"GCASH",label:"GCash",enLabel:"GCash",icon:O,color:"bg-blue-500 text-white"},{id:"MAYA",label:"Maya",enLabel:"Maya",icon:O,color:"bg-green-500 text-white"},{id:"SIGN_BILL",label:"挂账/签单",enLabel:"Sign Bill",icon:m,color:"bg-yellow-100 text-yellow-700"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(m,{className:"text-slate-700"})," Order Center 订单中心"]}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"Manage Orders / Pamahalaan ang mga Order"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:S,className:"flex items-center gap-2 px-3 py-1.5 bg-white text-slate-600 hover:bg-slate-50 rounded-lg text-sm font-medium transition-colors border border-slate-200 shadow-sm",children:[e.jsx(I,{size:16}),e.jsx("span",{children:"Test / 模拟"})]}),e.jsxs("div",{className:"flex gap-2 bg-white p-1 rounded-lg border border-slate-200 overflow-x-auto",children:[e.jsx("button",{onClick:()=>g("All"),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap ${i==="All"?"bg-slate-900 text-white shadow-sm":"text-slate-500 hover:text-slate-900 hover:bg-slate-50"}`,children:"All / Lahat"}),Object.values(s).map(t=>{const a=f(t);return e.jsx("button",{onClick:()=>g(t),className:`px-3 py-1.5 rounded-md text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-1 ${i===t?"bg-slate-900 text-white shadow-sm":"text-slate-500 hover:text-slate-900 hover:bg-slate-50"}`,children:a.label.split(" ")[1]},t)})]})]})]}),e.jsx("div",{className:"grid gap-4",children:j.length===0?e.jsxs("div",{className:"text-center py-20 bg-white rounded-xl border border-slate-100",children:[e.jsx("div",{className:"bg-slate-50 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{size:24,className:"text-slate-400"})}),e.jsx("h3",{className:"text-lg font-medium text-slate-700",children:"暂无订单 No Orders"}),e.jsx("p",{className:"text-slate-500",children:"当前没有需要处理的订单 / Walang order"})]}):j.map(t=>{const a=f(t.status);return e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 p-6 transition-all hover:shadow-md animate-fade-in",children:e.jsxs("div",{className:"flex flex-col lg:flex-row justify-between gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-3",children:[e.jsx("span",{className:"text-lg font-bold text-slate-800 bg-slate-100 px-3 py-1 rounded-lg",children:t.tableNumber}),D(t.source),e.jsxs("div",{className:`flex flex-col border rounded px-2.5 py-0.5 ${a.color}`,children:[e.jsx("span",{className:"text-xs font-bold leading-tight",children:a.label}),e.jsx("span",{className:"text-[10px] opacity-80 leading-tight",children:a.tagalog})]}),t.paymentMethod&&e.jsxs("span",{className:"text-xs font-medium bg-green-50 text-green-700 px-2 py-0.5 rounded border border-green-100 flex items-center gap-1",children:[e.jsx(v,{size:10})," ",t.paymentMethod]}),e.jsxs("span",{className:"text-xs text-slate-400 ml-auto lg:ml-0",children:["#",t.id.slice(-6)]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-500 mb-4",children:[e.jsx(M,{size:14}),e.jsx("span",{children:new Date(t.createdAt).toLocaleString()})]}),e.jsxs("div",{className:"space-y-2 max-w-2xl",children:[t.items.map((l,n)=>e.jsxs("div",{className:"flex justify-between items-center text-sm border-b border-slate-50 pb-1 last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs font-bold min-w-[2rem] text-center",children:["x",l.quantity]}),e.jsx("span",{className:"text-slate-700 font-medium",children:l.dishName})]}),e.jsxs("span",{className:"text-slate-500",children:["₱",l.price*l.quantity]})]},n)),t.notes&&e.jsxs("div",{className:"mt-2 text-xs bg-yellow-50 text-yellow-800 p-2 rounded border border-yellow-100 flex gap-2",children:[e.jsx("span",{className:"font-bold shrink-0",children:"备注 Note:"}),e.jsx("span",{children:t.notes})]})]})]}),e.jsxs("div",{className:"flex flex-col justify-between items-end border-t lg:border-t-0 lg:border-l border-slate-100 pt-4 lg:pt-0 lg:pl-6 min-w-[200px]",children:[e.jsxs("div",{className:"text-right mb-4",children:[e.jsx("span",{className:"text-sm text-slate-500",children:"Total Amount / Kabuuan"}),e.jsxs("div",{className:`text-3xl font-bold ${t.paymentMethod?"text-emerald-600":"text-slate-800"}`,children:["₱",t.totalAmount,t.paymentMethod&&e.jsx("span",{className:"text-xs ml-1 text-emerald-500 font-medium",children:"(PAID)"})]}),e.jsxs("div",{className:"text-xs text-slate-400",children:["≈ ¥",(t.totalAmount/8.2).toFixed(1)]})]}),e.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[t.status===s.PENDING&&e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:()=>p(t),className:"flex items-center justify-center gap-2 w-full py-2 bg-white border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors text-sm font-medium",children:[e.jsx(k,{size:16})," Print / i-Print"]}),e.jsx("button",{onClick:()=>r(t.id,s.COOKING),className:"flex flex-col items-center justify-center w-full py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm shadow-blue-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(L,{size:16})," Accept / Tanggapin"]})})]}),t.status===s.COOKING&&e.jsx("button",{onClick:()=>r(t.id,s.SERVED),className:"flex flex-col items-center justify-center w-full py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors shadow-sm shadow-emerald-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(v,{size:16})," Serve / I-serve"]})}),t.status===s.SERVED&&e.jsx(e.Fragment,{children:t.paymentMethod?e.jsx("button",{onClick:()=>r(t.id,s.COMPLETED),className:"flex flex-col items-center justify-center w-full py-2 bg-slate-100 text-slate-600 border border-slate-200 rounded-lg hover:bg-slate-200 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(z,{size:16})," Complete / Tapusin"]})}):e.jsx("button",{onClick:()=>r(t.id,s.PAID),className:"flex flex-col items-center justify-center w-full py-2 bg-slate-800 text-white rounded-lg hover:bg-slate-900 transition-colors shadow-sm shadow-slate-200",children:e.jsxs("div",{className:"flex items-center gap-2 text-sm font-medium",children:[e.jsx(b,{size:16})," Pay / Magbayad"]})})}),(t.status===s.PENDING||t.status===s.COOKING)&&e.jsxs("button",{onClick:()=>{confirm("Cancel order? 确定取消订单吗?")&&r(t.id,s.CANCELLED)},className:"flex items-center justify-center gap-2 w-full py-2 bg-white border border-red-200 text-red-600 rounded-lg hover:bg-red-50 transition-colors text-sm font-medium mt-2",children:[e.jsx(C,{size:16})," Cancel / Kanselahin"]}),(t.status===s.SERVED||t.status===s.PAID||t.status===s.COMPLETED)&&e.jsxs("button",{onClick:()=>p(t),className:"flex items-center justify-center gap-2 w-full py-2 text-slate-400 hover:text-slate-600 text-sm",children:[e.jsx(K,{size:14})," Reprint / I-print muli"]})]})]})]})},t.id)})}),A&&o&&e.jsx("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl",children:[e.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50",children:[e.jsxs("h3",{className:"text-xl font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(b,{className:"text-emerald-600"})," Cashier / Kahera"]}),e.jsx("button",{onClick:()=>d(!1),className:"p-2 bg-white rounded-full text-slate-400 hover:text-slate-600",children:e.jsx(C,{size:24})})]}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-slate-500 text-sm mb-1",children:"Total Due / Kabuuang Bayarín"}),e.jsxs("div",{className:"text-4xl font-bold text-slate-800",children:["₱",(N=u.find(t=>t.id===o))==null?void 0:N.totalAmount]})]}),e.jsx("p",{className:"text-sm font-bold text-slate-700 mb-3",children:"Select Payment Method / Pumili ng Paraan ng Pagbabayad"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:P.map(t=>{const a=t.icon;return e.jsxs("button",{onClick:()=>E(t.id),className:`flex flex-col items-center justify-center p-4 rounded-xl border transition-all ${t.color} border-transparent hover:border-slate-300 hover:scale-[1.02] hover:shadow-sm`,children:[e.jsx(a,{size:28,className:"mb-2 opacity-90"}),e.jsxs("div",{className:"text-center leading-tight",children:[e.jsx("span",{className:"font-bold text-sm block",children:t.label}),e.jsx("span",{className:"text-xs opacity-75",children:t.enLabel})]})]},t.id)})})]})]})})]})};export{J as default};
