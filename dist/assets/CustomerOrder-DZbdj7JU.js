import{j as e,O as h}from"./index-BV8Zipq2.js";import{r}from"./react-vendor-C14am9Lm.js";import{Y as D,x as Ne,b as _,Z as ge,_ as ve,$ as we,m as ye,a0 as J,l as F,a1 as Ce,a2 as X,a3 as f,a4 as ke,R as ze,X as Pe,a5 as Ee,E as Z,W as ee,N as Se,Q as se,k as Oe}from"./lucide-CwzgdtcU.js";import"./aws-sdk-BT5ufFbJ.js";import"./recharts-wRm9IGXD.js";const Fe=({dishes:te,orders:I,onPlaceOrder:ae,systemSettings:n})=>{const[o,N]=r.useState("MENU"),[k,le]=r.useState("All"),[u,z]=r.useState([]),[U,P]=r.useState(!1),[re,q]=r.useState(!1),[g,W]=r.useState(null),[B,ne]=r.useState(""),[v,H]=r.useState(""),[E,S]=r.useState(!1),[p,x]=r.useState(null),[c,w]=r.useState(""),[O,L]=r.useState(!1),[m,y]=r.useState(""),[$,ie]=r.useState(!1),[de,j]=r.useState(!1),a=n==null?void 0:n.storeInfo,ce=(a==null?void 0:a.name)||"江西饭店 (Jinjiang Star Hotel)",oe=(n==null?void 0:n.exchangeRate)||8.2,A=(n==null?void 0:n.serviceChargeRate)||.1,xe=["All",...(n==null?void 0:n.categories)||[]],C=(n==null?void 0:n.payment)||{aliPayEnabled:!1,weChatEnabled:!1,gCashEnabled:!0,mayaEnabled:!0};r.useEffect(()=>{const t=new URLSearchParams(window.location.search).get("id");t?(y(t),ie(!0)):j(!0)},[]);const me=s=>{const t=s.toUpperCase();return t.startsWith("82")||t.startsWith("83")||t.startsWith("RM")?"ROOM_SERVICE":t.includes("KTV")||t.includes("VIP")?"KTV":t==="TAKEOUT"?"TAKEOUT":"LOBBY"},G=te.filter(s=>{const t=k==="All"||s.category===k,i=s.name.toLowerCase().includes(B.toLowerCase());return s.available&&t&&i}),T=r.useMemo(()=>m?I.filter(s=>s.tableNumber===m).sort((s,t)=>new Date(t.createdAt).getTime()-new Date(s.createdAt).getTime()):[],[I,m]),R=s=>{z(t=>t.find(l=>l.dish.id===s.id)?t.map(l=>l.dish.id===s.id?{...l,quantity:l.quantity+1}:l):[...t,{dish:s,quantity:1}])},K=s=>{z(t=>t.reduce((i,l)=>(l.dish.id===s?l.quantity>1&&i.push({...l,quantity:l.quantity-1}):i.push(l),i),[]))},M=u.reduce((s,t)=>s+t.dish.price*t.quantity,0),V=M*A,d=M+V,he=u.reduce((s,t)=>s+t.quantity,0),ue=()=>{P(!1),S(!0),x(null),w("")},Y=()=>{p&&(L(!0),setTimeout(()=>{be(p),L(!1),S(!1)},2e3))},be=s=>{if(u.length===0||!m)return;const t=u.map(b=>({dishId:b.dish.id,dishName:b.dish.name,quantity:b.quantity,price:b.dish.price}));let i=h.PENDING,l=v;if(s==="CASH"){if(i=h.PENDING,c){const b=parseFloat(c),je=b-d;l=`${v?v+" | ":""}Pay with ${b}, Change: ${je.toFixed(0)}`}}else i=h.PAID;const Q=`WEB-${Date.now().toString().slice(-6)}`,pe={id:Q,tableNumber:m,source:me(m),items:t,status:i,totalAmount:d,createdAt:new Date().toISOString(),notes:l||"Mobile Order",paymentMethod:s};ae(pe),z([]),H(""),W({id:Q,method:s,total:d}),q(!0),setTimeout(()=>{q(!1),W(null),N("ORDERS")},4e3)},fe=s=>{switch(s){case h.PENDING:return e.jsx("span",{className:"bg-orange-100 text-orange-600 px-2 py-0.5 rounded text-xs font-bold",children:"待接单 Pending"});case h.COOKING:return e.jsx("span",{className:"bg-blue-100 text-blue-600 px-2 py-0.5 rounded text-xs font-bold",children:"烹饪中 Cooking"});case h.SERVED:return e.jsx("span",{className:"bg-green-100 text-green-600 px-2 py-0.5 rounded text-xs font-bold",children:"已上菜 Served"});case h.PAID:return e.jsx("span",{className:"bg-slate-100 text-slate-600 px-2 py-0.5 rounded text-xs font-bold",children:"已支付 Paid"});default:return e.jsx("span",{className:"bg-red-100 text-red-600 px-2 py-0.5 rounded text-xs font-bold",children:"已取消 Cancelled"})}};if(de&&!$)return e.jsx("div",{className:"fixed inset-0 bg-slate-50 z-50 flex flex-col items-center justify-center p-6 animate-fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-sm p-8 rounded-2xl shadow-xl text-center",children:[e.jsx(D,{size:48,className:"text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-slate-800 mb-2",children:"Welcome 欢迎光临"}),e.jsx("p",{className:"text-slate-500 mb-6",children:"Please select your location 请选择您的位置"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>{y("LOBBY"),j(!1)},className:"w-full py-3 bg-white border-2 border-slate-200 rounded-xl font-bold text-slate-700 hover:border-red-500 hover:text-red-600 transition-colors",children:"Lobby Hall 大厅"}),e.jsx("button",{onClick:()=>{y("TAKEOUT"),j(!1)},className:"w-full py-3 bg-white border-2 border-slate-200 rounded-xl font-bold text-slate-700 hover:border-blue-500 hover:text-blue-600 transition-colors",children:"Takeout 外卖"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute inset-x-0 top-1/2 -translate-y-1/2 h-px bg-slate-200 z-0"}),e.jsx("span",{className:"relative z-10 bg-white px-2 text-xs text-slate-400",children:"OR INPUT ROOM NO"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",placeholder:"e.g. 8201",className:"flex-1 border-2 border-slate-200 rounded-xl px-4 py-2 text-center font-bold focus:border-red-500 outline-none uppercase",id:"custom-room-input"}),e.jsx("button",{onClick:()=>{const s=document.getElementById("custom-room-input").value;s&&(y(s),j(!1))},className:"bg-red-600 text-white px-6 rounded-xl font-bold",children:"Go"})]})]})]})});if(re&&g){const s=g.method!=="CASH";return e.jsxs("div",{className:`fixed inset-0 z-50 flex flex-col items-center justify-center p-6 text-center animate-fade-in ${s?"bg-emerald-600":"bg-orange-500"} text-white`,children:[e.jsx("div",{className:"w-24 h-24 bg-white/20 rounded-full flex items-center justify-center mb-6 backdrop-blur-sm animate-bounce",children:s?e.jsx(Ne,{size:48}):e.jsx(_,{size:48})}),e.jsx("h2",{className:"text-3xl font-bold mb-2",children:s?"Payment Successful!":"Order Placed!"}),e.jsx("p",{className:"text-xl font-medium opacity-90 mb-1",children:s?"支付成功":"下单成功"}),e.jsxs("p",{className:"opacity-80 mb-6 max-w-xs leading-relaxed",children:[s?"Thank you! Your order has been confirmed.":"Please wait for staff to collect payment."," ",e.jsx("br",{}),s?"订单已确认，后厨正在制作。":"请等待服务员前来确认。"]}),e.jsxs("div",{className:"bg-white/10 rounded-xl p-4 w-full max-w-xs backdrop-blur-md border border-white/20",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"opacity-75",children:"Order ID"}),e.jsxs("span",{className:"font-mono font-bold",children:["#",g.id.slice(-6)]})]}),e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"opacity-75",children:"Amount"}),e.jsxs("span",{className:"font-bold",children:["₱",g.total.toFixed(0)]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"opacity-75",children:"Location"}),e.jsx("span",{className:"font-bold",children:m})]})]})]})}return e.jsxs("div",{className:"min-h-screen bg-slate-50 pb-24 max-w-md mx-auto shadow-2xl overflow-hidden relative font-sans",children:[o==="MENU"&&e.jsxs("div",{className:"relative bg-slate-800 shrink-0 pb-6",children:[e.jsx("div",{className:"absolute inset-0 overflow-hidden opacity-60",children:e.jsx("img",{src:"https://picsum.photos/800/400?random=restaurant",className:"w-full h-full object-cover",alt:"Banner"})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-slate-900 via-slate-900/50 to-transparent"}),e.jsxs("div",{className:"relative z-10 p-5 pt-8 text-white",children:[e.jsx("h1",{className:"text-xl font-bold leading-tight shadow-sm mb-3",children:ce}),e.jsxs("div",{className:"space-y-1.5 text-xs opacity-90",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(D,{size:14,className:"mt-0.5 shrink-0 text-red-400"}),e.jsx("span",{children:a==null?void 0:a.address})]}),(a==null?void 0:a.wifiSsid)&&e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ge,{size:14,className:"text-blue-400"}),e.jsxs("span",{children:["WiFi: ",a.wifiSsid]})]}),a.wifiPassword&&e.jsxs("span",{children:["Pass: ",a.wifiPassword]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[(a==null?void 0:a.phone)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ve,{size:14,className:"text-green-400"}),e.jsx("span",{children:a.phone})]}),(a==null?void 0:a.telegram)&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{size:14,className:"text-sky-400"}),e.jsx("span",{children:a.telegram})]})]})]})]}),e.jsxs("div",{onClick:()=>!$&&j(!0),className:"absolute top-4 right-4 bg-white/20 backdrop-blur-md text-white px-3 py-1 rounded-full text-xs font-bold border border-white/30 flex items-center gap-1 cursor-pointer z-20",children:[e.jsx(D,{size:12})," ",m]})]}),e.jsxs("div",{className:`flex-1 overflow-y-auto ${o==="MENU"?"-mt-4 relative z-10 rounded-t-2xl bg-slate-50":"pt-4"}`,children:[o==="MENU"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"sticky top-0 z-20 bg-slate-50 pt-4 pb-2 px-4 shadow-sm",children:[e.jsxs("div",{className:"relative mb-3",children:[e.jsx(ye,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",size:16}),e.jsx("input",{type:"text",placeholder:"Search food... 搜索菜品",value:B,onChange:s=>ne(s.target.value),className:"w-full pl-9 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-red-500 shadow-sm"})]}),e.jsx("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:xe.map(s=>e.jsx("button",{onClick:()=>le(s),className:`px-4 py-1.5 rounded-full text-xs font-bold whitespace-nowrap transition-all shadow-sm ${k===s?"bg-red-600 text-white shadow-red-200 scale-105":"bg-white text-slate-500 border border-slate-200"}`,children:s==="All"?"全部 All":s},s))})]}),e.jsx("div",{className:"p-4 space-y-4 min-h-[50vh]",children:G.length===0?e.jsxs("div",{className:"text-center py-10 text-slate-400 text-sm flex flex-col items-center",children:[e.jsx(_,{size:32,className:"mb-2 opacity-50"}),e.jsx("span",{children:"No items found"})]}):G.map(s=>{var i;const t=((i=u.find(l=>l.dish.id===s.id))==null?void 0:i.quantity)||0;return e.jsxs("div",{className:"flex gap-3 bg-white p-3 rounded-2xl shadow-sm border border-slate-100",children:[e.jsx("div",{className:"w-24 h-24 rounded-xl bg-slate-100 shrink-0 overflow-hidden",children:e.jsx("img",{src:s.imageUrl,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between min-w-0 py-0.5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-slate-800 text-sm truncate",children:s.name}),e.jsx("p",{className:"text-xs text-slate-400 line-clamp-2 mt-0.5 leading-relaxed",children:s.description})]}),e.jsxs("div",{className:"flex justify-between items-end mt-1",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-red-600 text-lg",children:["₱",s.price]}),e.jsxs("div",{className:"text--[10px] text-slate-400",children:["≈ ¥",(s.price/oe).toFixed(0)]})]}),t>0?e.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 rounded-full px-1 py-1 border border-slate-200 shadow-inner",children:[e.jsx("button",{onClick:()=>K(s.id),className:"w-7 h-7 flex items-center justify-center rounded-full bg-white text-slate-600 shadow-sm border border-slate-100 active:scale-90 transition-transform",children:e.jsx(J,{size:14})}),e.jsx("span",{className:"font-bold text-slate-800 text-sm min-w-[16px] text-center",children:t}),e.jsx("button",{onClick:()=>R(s),className:"w-7 h-7 flex items-center justify-center rounded-full bg-red-600 text-white shadow-sm active:scale-90 transition-transform",children:e.jsx(F,{size:14})})]}):e.jsx("button",{onClick:()=>R(s),className:"w-8 h-8 flex items-center justify-center rounded-full bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition-colors active:scale-90 shadow-sm",children:e.jsx(F,{size:18})})]})]})]},s.id)})})]}),o==="ORDERS"&&e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-4 px-2",children:"Order History 订单记录"}),T.length===0?e.jsxs("div",{className:"text-center py-12 text-slate-400 bg-white rounded-2xl border border-dashed border-slate-200",children:[e.jsx(Ce,{size:48,className:"mx-auto mb-3 opacity-30"}),e.jsx("p",{children:"No orders yet"}),e.jsx("button",{onClick:()=>N("MENU"),className:"mt-4 text-red-600 font-bold text-sm",children:"Order Now 去点餐"})]}):T.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[e.jsx("span",{className:"text-xs text-slate-500 font-mono",children:new Date(s.createdAt).toLocaleString()}),fe(s.status)]}),e.jsxs("div",{className:"p-4 space-y-2",children:[s.items.map((t,i)=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("span",{className:"text-slate-700 font-medium",children:["x",t.quantity," ",t.dishName]}),e.jsxs("span",{className:"text-slate-500",children:["₱",t.price*t.quantity]})]},i)),s.paymentMethod==="CASH"&&s.status===h.PENDING&&e.jsx("div",{className:"mt-2 bg-yellow-50 text-yellow-800 text-xs p-2 rounded",children:"Wait for staff to collect cash. 等待服务员收款。"}),e.jsxs("div",{className:"pt-3 mt-2 border-t border-slate-50 flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Total"}),e.jsxs("span",{className:"text-lg font-bold text-slate-800",children:["₱",s.totalAmount]})]})]})]},s.id))]})]}),o==="MENU"&&u.length>0&&!U&&!E&&e.jsx("div",{className:"fixed bottom-24 left-4 right-4 max-w-md mx-auto z-30",children:e.jsxs("button",{onClick:()=>P(!0),className:"w-full bg-slate-900/95 backdrop-blur text-white p-4 rounded-2xl shadow-2xl flex items-center justify-between active:scale-[0.98] transition-transform border border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(X,{size:24}),e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-[10px] font-bold w-5 h-5 flex items-center justify-center rounded-full border-2 border-slate-900",children:he})]}),e.jsx("div",{className:"text-left",children:e.jsxs("div",{className:"text-lg font-bold",children:["₱",d.toFixed(0)]})})]}),e.jsxs("div",{className:"flex items-center gap-2 font-bold text-slate-200 text-sm",children:["View Cart ",e.jsx(f,{size:16})]})]})}),e.jsxs("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-slate-200 flex justify-around p-2 z-40 max-w-md mx-auto",children:[e.jsxs("button",{onClick:()=>N("MENU"),className:`flex flex-col items-center justify-center w-full py-2 rounded-xl transition-colors ${o==="MENU"?"text-red-600 bg-red-50":"text-slate-400"}`,children:[e.jsx(ke,{size:24}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Menu 菜单"})]}),e.jsxs("button",{onClick:()=>N("ORDERS"),className:`flex flex-col items-center justify-center w-full py-2 rounded-xl transition-colors ${o==="ORDERS"?"text-red-600 bg-red-50":"text-slate-400"}`,children:[e.jsx(ze,{size:24}),e.jsx("span",{className:"text-[10px] font-bold mt-1",children:"Orders 订单"}),T.length>0&&o!=="ORDERS"&&e.jsx("span",{className:"absolute top-2 right-[20%] w-2 h-2 bg-red-500 rounded-full"})]})]}),U&&!E&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-200",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl sm:rounded-3xl overflow-hidden flex flex-col max-h-[85vh] animate-in slide-in-from-bottom-10 duration-300",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex justify-between items-center bg-slate-50/80 backdrop-blur",children:[e.jsxs("h3",{className:"font-bold text-slate-800 flex items-center gap-2 text-lg",children:[e.jsx(X,{size:20,className:"text-red-600"})," Cart 购物车"]}),e.jsx("button",{onClick:()=>P(!1),className:"p-2 bg-white rounded-full text-slate-400 shadow-sm hover:bg-slate-100",children:e.jsx(Pe,{size:20})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-5 space-y-4",children:[u.map((s,t)=>e.jsxs("div",{className:"flex justify-between items-center border-b border-slate-50 last:border-0 pb-4 last:pb-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-800",children:s.dish.name}),e.jsxs("div",{className:"text-xs text-slate-400",children:["₱",s.dish.price]})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 rounded-lg p-1",children:[e.jsx("button",{onClick:()=>K(s.dish.id),className:"w-8 h-8 flex items-center justify-center rounded bg-white shadow-sm text-slate-600",children:e.jsx(J,{size:14})}),e.jsx("span",{className:"font-bold text-slate-800 w-4 text-center",children:s.quantity}),e.jsx("button",{onClick:()=>R(s.dish),className:"w-8 h-8 flex items-center justify-center rounded bg-red-600 text-white shadow-sm",children:e.jsx(F,{size:14})})]}),e.jsxs("div",{className:"w-16 text-right font-bold text-slate-800",children:["₱",s.dish.price*s.quantity]})]},t)),e.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-100",children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase mb-2 block",children:"Special Requests 备注"}),e.jsx("textarea",{value:v,onChange:s=>H(s.target.value),placeholder:"e.g. No spicy, less oil... (不要辣，少油)",className:"w-full bg-slate-50 border-0 rounded-xl p-3 text-sm focus:ring-2 focus:ring-red-500 outline-none resize-none h-20"})]})]}),e.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 space-y-3",children:[e.jsxs("div",{className:"space-y-1 mb-2",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-500",children:[e.jsx("span",{children:"Subtotal 小计"}),e.jsxs("span",{children:["₱",M]})]}),A>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm text-slate-500",children:[e.jsxs("span",{children:["Service Charge (",A*100,"%)"]}),e.jsxs("span",{children:["₱",V.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold text-slate-800 pt-2 border-t border-slate-200",children:[e.jsx("span",{children:"Total 合计"}),e.jsxs("span",{children:["₱",d.toFixed(0)]})]})]}),e.jsx("button",{onClick:ue,className:"w-full py-4 bg-red-600 text-white rounded-xl font-bold text-lg hover:bg-red-700 shadow-xl shadow-red-200 active:scale-[0.98] transition-transform flex items-center justify-center gap-2",children:"Checkout 去支付"})]})]})}),E&&e.jsx("div",{className:"fixed inset-0 bg-slate-900/80 z-[60] flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in",children:e.jsxs("div",{className:"bg-white w-full max-w-md rounded-t-3xl sm:rounded-3xl overflow-hidden flex flex-col max-h-[90vh] animate-in slide-in-from-bottom-10",children:[e.jsxs("div",{className:"p-5 border-b border-slate-100 flex items-center justify-between",children:[e.jsx("button",{onClick:()=>S(!1),className:"p-2 -ml-2 text-slate-400 hover:text-slate-600",children:e.jsx(Ee,{size:20})}),e.jsx("h3",{className:"font-bold text-slate-800 text-lg",children:"Cashier 收银台"}),e.jsx("div",{className:"w-8"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("p",{className:"text-slate-500 text-sm mb-1",children:"Total Amount 应付金额"}),e.jsxs("div",{className:"text-4xl font-bold text-slate-900",children:["₱",d.toFixed(0)]})]}),p?e.jsx("div",{className:"animate-in fade-in slide-in-from-right-4",children:p==="CASH"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 border border-green-100 p-4 rounded-xl text-center",children:[e.jsx(Z,{className:"mx-auto text-green-600 mb-2",size:32}),e.jsx("h4",{className:"font-bold text-green-800",children:"Cash Payment"}),e.jsx("p",{className:"text-xs text-green-700",children:"Please prepare your cash."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:"How much will you pay with?"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 font-bold",children:"₱"}),e.jsx("input",{type:"number",autoFocus:!0,value:c,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-4 py-4 text-2xl font-bold border-2 border-slate-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-100 outline-none transition-all",placeholder:"e.g. 1000"})]}),e.jsxs("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-2",children:[[500,1e3].map(s=>e.jsxs("button",{onClick:()=>w(s.toString()),className:"px-4 py-2 bg-slate-100 rounded-lg font-bold text-slate-600 hover:bg-slate-200",children:["₱",s]},s)),e.jsx("button",{onClick:()=>w(d.toFixed(0)),className:"px-4 py-2 bg-slate-100 rounded-lg font-bold text-slate-600 hover:bg-slate-200",children:"Exact"})]})]}),c&&!isNaN(parseFloat(c))&&e.jsxs("div",{className:"flex justify-between items-center p-4 bg-slate-50 rounded-xl",children:[e.jsx("span",{className:"text-slate-500 font-medium",children:"Change Due 找零"}),e.jsxs("span",{className:`text-xl font-bold ${parseFloat(c)>=d?"text-green-600":"text-red-500"}`,children:["₱",(parseFloat(c)-d).toFixed(0)]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 py-3 text-slate-500 font-bold hover:bg-slate-50 rounded-xl",children:"Back"}),e.jsx("button",{onClick:Y,disabled:O||(c?parseFloat(c)<d:!0),className:"flex-[2] py-3 bg-green-600 text-white font-bold rounded-xl shadow-lg shadow-green-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O?e.jsx(Oe,{className:"animate-spin"}):"Confirm Cash"})]})]}):e.jsx("div",{className:"space-y-8 text-center py-8",children:O?e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-20 h-20 border-4 border-slate-200 border-t-red-600 rounded-full animate-spin mb-6"}),e.jsx("h4",{className:"text-xl font-bold text-slate-800",children:"Processing..."}),e.jsx("p",{className:"text-slate-500",children:"Waiting for payment confirmation"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mx-auto w-48 h-48 bg-slate-100 rounded-2xl flex items-center justify-center mb-4 border-2 border-dashed border-slate-300 relative overflow-hidden",children:[e.jsx(se,{size:64,className:"text-slate-400 opacity-20"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"Simulated API QR"})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-xl font-bold text-slate-800 mb-1",children:"Scan to Pay"}),e.jsxs("p",{className:"text-slate-500 text-sm",children:["Use your ",p," app"]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:()=>x(null),className:"flex-1 py-3 text-slate-500 font-bold hover:bg-slate-50 rounded-xl",children:"Back"}),e.jsx("button",{onClick:Y,className:"flex-[2] py-3 bg-red-600 text-white font-bold rounded-xl shadow-lg shadow-red-200 flex items-center justify-center gap-2",children:"Simulate Success (Dev)"})]})]})})}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm font-bold text-slate-700 mb-2",children:"Select Payment Method 选择支付方式"}),e.jsxs("button",{onClick:()=>x("CASH"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:border-green-500 hover:bg-green-50 transition-all text-left group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-100 flex items-center justify-center text-green-600 group-hover:scale-110 transition-transform",children:e.jsx(Z,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-800",children:"Cash 现金支付"}),e.jsx("div",{className:"text-xs text-slate-400",children:"Pay at counter / table"})]}),e.jsx(f,{size:18,className:"text-slate-300"})]}),C.gCashEnabled&&e.jsxs("button",{onClick:()=>x("GCASH"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:border-blue-500 hover:bg-blue-50 transition-all text-left group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white group-hover:scale-110 transition-transform",children:e.jsx(ee,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-800",children:"GCash"}),e.jsx("div",{className:"text-xs text-slate-400",children:"E-Wallet"})]}),e.jsx(f,{size:18,className:"text-slate-300"})]}),C.mayaEnabled&&e.jsxs("button",{onClick:()=>x("MAYA"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:border-green-500 hover:bg-green-50 transition-all text-left group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-green-500 flex items-center justify-center text-white group-hover:scale-110 transition-transform",children:e.jsx(ee,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-800",children:"Maya"}),e.jsx("div",{className:"text-xs text-slate-400",children:"E-Wallet"})]}),e.jsx(f,{size:18,className:"text-slate-300"})]}),C.aliPayEnabled&&e.jsxs("button",{onClick:()=>x("ALIPAY"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:border-blue-400 hover:bg-blue-50 transition-all text-left group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 group-hover:scale-110 transition-transform",children:e.jsx(Se,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-800",children:"Alipay 支付宝"}),e.jsx("div",{className:"text-xs text-slate-400",children:"RMB Payment"})]}),e.jsx(f,{size:18,className:"text-slate-300"})]}),C.weChatEnabled&&e.jsxs("button",{onClick:()=>x("WECHAT"),className:"w-full flex items-center gap-4 p-4 rounded-xl border-2 border-slate-100 hover:border-emerald-500 hover:bg-emerald-50 transition-all text-left group",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600 group-hover:scale-110 transition-transform",children:e.jsx(se,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-bold text-slate-800",children:"WeChat 微信支付"}),e.jsx("div",{className:"text-xs text-slate-400",children:"RMB Payment"})]}),e.jsx(f,{size:18,className:"text-slate-300"})]})]})]})]})})]})};export{Fe as default};
