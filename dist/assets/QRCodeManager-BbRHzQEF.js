import{jsxs as t,jsx as e}from"react/jsx-runtime";import{useState as h,useMemo as v}from"react";import{QrCode as N,Printer as w,BedDouble as k,Utensils as y,Mic2 as T,Rocket as C,ExternalLink as L,AlertCircle as U}from"lucide-react";const R=({hotelRooms:s,ktvRooms:d})=>{const[a,n]=h("HOTEL"),[l,o]=h("brand"),m=v(()=>typeof window<"u"?"https://www.jiangxijiudian.store":"",[]),i=r=>{try{const c=`${m}/?page=customer&id=${encodeURIComponent(r)}`,f=l==="black"?"000000":"ea580c";return`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(c)}&color=${f}&bgcolor=ffffff`}catch(c){return console.error("Error generating QR code URL:",c),""}},b=r=>{try{return`${m}/?page=customer&id=${encodeURIComponent(r)}`}catch(c){return console.error("Error generating clean link:",c),"#"}};return t("div",{className:"animate-fade-in space-y-6 pb-20",children:[t("div",{className:"flex flex-col items-start justify-between gap-4 md:flex-row md:items-center print:hidden",children:[t("div",{children:[t("h2",{className:"flex items-center gap-2 text-2xl font-bold text-slate-800",children:[e(N,{className:"text-slate-900"})," 二维码生成中心 (QR Codes)"]}),e("p",{className:"mt-1 text-sm text-slate-500",children:"生成各区域点餐码 / Generate Order Codes"})]}),t("div",{className:"flex gap-3",children:[t("div",{className:"flex rounded-lg border border-slate-200 bg-white p-1",children:[e("button",{onClick:()=>o("simple"),className:`rounded-md px-3 py-1.5 text-xs font-bold ${l==="simple"?"bg-slate-200 text-slate-800":"text-slate-500"}`,children:"Simple"}),e("button",{onClick:()=>o("brand"),className:`rounded-md px-3 py-1.5 text-xs font-bold ${l==="brand"?"bg-orange-500 text-white":"text-slate-500"}`,children:"Brand"}),e("button",{onClick:()=>o("black"),className:`rounded-md px-3 py-1.5 text-xs font-bold ${l==="black"?"bg-black text-white":"text-slate-500"}`,children:"Ink-Saver"})]}),t("button",{onClick:()=>{window.print()},className:"flex items-center gap-2 rounded-lg bg-slate-900 px-4 py-2 text-white shadow-lg shadow-slate-900/20 hover:bg-slate-800",children:[e(w,{size:20}),e("span",{children:"批量打印 / Print"})]})]})]}),t("div",{className:"flex gap-2 overflow-x-auto pb-2 print:hidden",children:[e(x,{active:a==="HOTEL",onClick:()=>n("HOTEL"),icon:k,label:"客房 Rooms"}),e(x,{active:a==="LOBBY",onClick:()=>n("LOBBY"),icon:y,label:"大厅 Lobby"}),e(x,{active:a==="KTV",onClick:()=>n("KTV"),icon:T,label:"KTV"}),e(x,{active:a==="TAKEOUT",onClick:()=>n("TAKEOUT"),icon:C,label:"外卖 Takeout"})]}),t("div",{className:"min-h-[60vh] rounded-xl border border-slate-200 bg-slate-50/50 p-4 md:p-8 print:border-none print:bg-white print:p-0",children:[t("div",{className:"mb-8 hidden text-center print:block",children:[e("h1",{className:"text-3xl font-bold",children:"江西酒店 Jiangxi Hotel"}),e("p",{className:"text-slate-500",children:"扫码下单 • 极速送达 / Scan to Order"})]}),(()=>{switch(a){case"HOTEL":return t("div",{className:"space-y-8",children:[t("div",{children:[t("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-slate-800",children:[e("span",{className:"h-6 w-2 rounded-full bg-orange-500"})," ","8楼2区 / 8th Floor Area 2 (8201-8232)"]}),e("div",{className:"grid grid-cols-2 gap-6 md:grid-cols-4 lg:grid-cols-6 print:grid-cols-4",children:s.filter(r=>r.floor===82).map(r=>e(g,{title:`${r.number}`,subTitle:"客房点餐 Room Service",value:r.number,getUrl:i,style:l},r.id))})]}),t("div",{children:[t("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-slate-800",children:[e("span",{className:"h-6 w-2 rounded-full bg-orange-500"})," ","8楼3区 / 8th Floor Area 3 (8301-8332)"]}),e("div",{className:"grid grid-cols-2 gap-6 md:grid-cols-4 lg:grid-cols-6 print:grid-cols-4",children:s.filter(r=>r.floor===83).map(r=>e(g,{title:`${r.number}`,subTitle:"客房点餐 Room Service",value:r.number,getUrl:i,style:l},r.id))})]})]});case"LOBBY":return e("div",{className:"flex flex-col items-center justify-center py-12",children:t("div",{className:`w-full max-w-lg rounded-2xl p-10 text-center shadow-lg print:border-4 print:shadow-none ${l==="black"?"border-slate-800 bg-white":"border-orange-500 bg-orange-50"}`,children:[e("h3",{className:"mb-2 text-3xl font-bold text-slate-800",children:"大厅点餐 Lobby Dining"}),e("p",{className:"mb-8 text-lg text-slate-500",children:"扫码查看菜单下单 / Scan to Order"}),e("div",{className:"mb-6 inline-block rounded-xl border-2 border-dashed border-slate-200 bg-white p-6 shadow-sm",children:e("img",{src:i("LOBBY"),alt:"Lobby QR",className:"h-64 w-64 mix-blend-multiply"})}),e("div",{className:"mt-4 font-mono text-sm text-slate-400",children:"ID: LOBBY"})]})});case"KTV":return t("div",{children:[t("h3",{className:"mb-4 flex items-center gap-2 text-lg font-bold text-slate-800",children:[e("span",{className:"h-6 w-2 rounded-full bg-purple-600"})," KTV 包厢 / VIP Room"]}),e("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-3",children:d.map(r=>e(g,{title:r.name,subTitle:"点歌/酒水 KTV Service",value:r.id,getUrl:i,style:l},r.id))})]});case"TAKEOUT":return e("div",{className:"flex flex-col items-center justify-center py-12",children:t("div",{className:"w-full max-w-md rounded-2xl border border-slate-200 bg-white p-8 text-center shadow-lg print:border-2 print:shadow-none",children:[e("h3",{className:"mb-2 text-2xl font-bold text-slate-800",children:"外卖专属码 Takeout"}),e("p",{className:"mb-6 text-slate-500",children:"印在宣传单或名片上 / For Flyers & Cards"}),e("div",{className:"mb-6 inline-block rounded-xl border-2 border-dashed border-slate-200 bg-slate-50 p-6",children:e("img",{src:i("TAKEOUT"),alt:"Takeout QR",className:"h-48 w-48 mix-blend-multiply"})}),t("div",{className:"flex items-center justify-center gap-2 break-all rounded-lg bg-blue-50 py-2 text-sm text-blue-600",children:[e(L,{size:16}),e("span",{children:b("TAKEOUT")})]})]})})}})()]})]})},x=({active:s,onClick:d,icon:a,label:n})=>t("button",{onClick:d,className:`flex items-center gap-2 whitespace-nowrap rounded-lg px-4 py-2.5 font-medium transition-all ${s?"bg-white text-slate-900 shadow-sm ring-1 ring-slate-200":"text-slate-500 hover:bg-white/50 hover:text-slate-700"}`,children:[e(a,{size:18}),e("span",{children:n})]}),g=({title:s,subTitle:d,value:a,getUrl:n,style:l})=>{const[o,m]=h(!1),[i,b]=h(!0),p=l==="brand"?"border-orange-500":l==="black"?"border-black":"border-slate-200",u=l==="brand"?"bg-orange-50":"bg-white",r=l==="brand"?"text-orange-900":"text-slate-800";return t("div",{className:`rounded-xl border-2 p-4 ${p} ${u} flex flex-col items-center text-center shadow-sm print:break-inside-avoid print:shadow-none`,children:[t("div",{className:"relative mb-3 flex aspect-square w-full items-center justify-center overflow-hidden rounded-lg border border-slate-100 bg-white p-2",children:[i&&e("div",{className:"absolute inset-0 flex items-center justify-center",children:e("div",{className:"h-8 w-8 animate-spin rounded-full border-4 border-slate-200 border-t-orange-500"})}),o?t("div",{className:"flex flex-col items-center justify-center text-slate-400",children:[e(U,{size:32}),e("p",{className:"mt-2 text-xs",children:"加载失败"})]}):e("img",{src:n(a),alt:s,className:"h-full w-full object-contain mix-blend-multiply",onLoad:()=>b(!1),onError:()=>{m(!0),b(!1)}})]}),e("div",{className:`font-bold ${r} text-xl`,children:s}),e("div",{className:"mt-1 text-xs font-medium uppercase tracking-wider text-slate-500",children:d}),t("div",{className:"mt-1 font-mono text-xs text-slate-400",children:["ID: ",a]})]})};export{R as default};
