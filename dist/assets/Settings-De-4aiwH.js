import{a as ee,s as O,g as se,t as te,b as ae,j as e}from"./index-BV8Zipq2.js";import{r as i}from"./react-vendor-C14am9Lm.js";import{P as le}from"./printer-DXAaJEWD.js";import{n as re,am as ne,an as ie,z as oe,ao as de,l as ce,s as xe,ap as me,D as pe,aq as C,h as w,H as K,ar as G,as as S,at as he,au as ge,av as ue,Z as be,aw as fe,V as B,ax as je}from"./lucide-CwzgdtcU.js";import"./aws-sdk-BT5ufFbJ.js";import"./recharts-wRm9IGXD.js";const ve={},Ee=({onSettingsChange:k})=>{var U,H;const[r,c]=i.useState({name:"æ±Ÿè¥¿é¥­åº— (Jinjiang Star Hotel)",address:"5 Corner Lourdes Street and Roxas Boulevard, Pasay City",phone:"+639084156449",openingHours:"10:00 - 02:00",kitchenPrinterUrl:"",wifiSsid:"jx88888888",wifiPassword:"",telegram:"@jx555999"}),[m,j]=i.useState(["çƒ­èœ","å‡‰èœ","æ±¤ç¾¹","ä¸»é£Ÿ","é…’æ°´","ç‰¹è‰²èœ"]),[p,E]=i.useState(""),[D,M]=i.useState({sound:!0,desktop:!0}),[x,b]=i.useState({exchangeRate:8.2,serviceCharge:10}),[d,h]=i.useState({enabledMethods:["CASH"],aliPayEnabled:!1,weChatEnabled:!1,gCashEnabled:!0,mayaEnabled:!0}),[t,l]=i.useState(ee()),[R,z]=i.useState(!1),[v,P]=i.useState("none"),[$,F]=i.useState("custom"),[T,A]=i.useState(!1),[o,f]=i.useState({open:!1,level:"low",title:"",message:"",action:()=>{}}),[N,I]=i.useState(""),g=ve||{},_=!!g.VITE_GITHUB_TOKEN,L=!!g.VITE_S3_ACCESS_KEY,W=!!(g.VITE_SUPABASE_URL||g.NEXT_PUBLIC_SUPABASE_URL||g.SUPABASE_URL);i.useEffect(()=>{const s=localStorage.getItem("jx_settings");if(s){const a=JSON.parse(s);a.storeInfo&&c(n=>({...n,...a.storeInfo})),a.notifications&&M(a.notifications),a.exchangeRate&&b(n=>({...n,exchangeRate:a.exchangeRate})),a.serviceChargeRate&&b(n=>({...n,serviceCharge:a.serviceChargeRate*100})),a.payment&&h(n=>({...n,...a.payment})),a.categories&&Array.isArray(a.categories)&&j(a.categories)}t.type!=="local"&&y(t)},[]);const V=()=>{const s={storeInfo:r,notifications:D,payment:d,exchangeRate:x.exchangeRate,serviceChargeRate:x.serviceCharge/100,categories:m};localStorage.setItem("jx_settings",JSON.stringify(s)),O(t),k&&k(s),t.type!=="local"&&y(t),A(!0),setTimeout(()=>A(!1),3e3)},q=()=>{localStorage.removeItem("jx_dishes"),localStorage.removeItem("jx_orders"),localStorage.removeItem("jx_expenses"),localStorage.removeItem("jx_settings"),localStorage.removeItem("jx_inventory"),window.location.reload()},J=()=>{I(""),f({open:!0,level:"high",title:"ç³»ç»Ÿçº§è­¦å‘Š System Warning",message:`æ­¤æ“ä½œå°†æ°¸ä¹…æ¸…é™¤æµè§ˆå™¨ä¸­çš„æ‰€æœ‰æœ¬åœ°æ•°æ®ï¼åŒ…æ‹¬è®¢å•ã€èœå•å’Œè´¢åŠ¡è®°å½•ã€‚å¦‚æžœæ˜¯â€œæœ¬åœ°å­˜å‚¨â€æ¨¡å¼ï¼Œæ•°æ®å°†æ— æ³•æ¢å¤ã€‚

å¦‚éœ€ç»§ç»­ï¼Œè¯·åœ¨ä¸‹æ–¹è¾“å…¥ "RESET"`,action:q})},y=async(s=t)=>{z(!0),P("none");let a=!1;if(s.type==="supabase")try{O(s);const n=se(),{error:u}=await n.from("dishes").select("id").limit(1);u?console.error("Supabase Test Error:",u):a=!0}catch(n){console.error(n)}else s.type==="s3"?a=await te(s.s3Config):s.type==="github"&&(a=await ae(s.githubConfig));z(!1),P(a?"success":"failure")},Y=()=>{p&&!m.includes(p)&&(j([...m,p]),E(""))},X=s=>{f({open:!0,level:"low",title:"ç¡®è®¤åˆ é™¤åˆ†ç±»",message:`ç¡®å®šè¦åˆ é™¤åˆ†ç±» "${s}" å—ï¼Ÿæ³¨æ„ï¼šå±žäºŽè¯¥åˆ†ç±»çš„èœå“å¯èƒ½ä¼šæ˜¾ç¤ºå¼‚å¸¸ã€‚`,action:()=>j(m.filter(a=>a!==s))})},Z=s=>{F(s);let a="",n="auto";switch(s){case"google":a="https://storage.googleapis.com";break;case"cloudflare":a="https://<ACCOUNT_ID>.r2.cloudflarestorage.com";break;case"minio":a="http://localhost:9000",n="us-east-1";break}l(u=>({...u,s3Config:{...u.s3Config,endpoint:a,region:n}}))},Q=()=>{const s={id:"TEST-001",tableNumber:"A1",source:"LOBBY",createdAt:new Date().toISOString(),paymentMethod:"CASH",totalAmount:1234,items:[{dishName:"Kung Pao Chicken",quantity:1,price:500},{dishName:"Rice",quantity:2,price:50},{dishName:"Cola",quantity:2,price:80}]};le.printOrder(s)};return e.jsxs("div",{className:"space-y-6 animate-fade-in pb-20",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800",children:"ç³»ç»Ÿè®¾ç½® Settings"}),e.jsx("p",{className:"text-slate-500 text-sm mt-1",children:"åº—é“ºä¿¡æ¯ã€æ”¯ä»˜æ–¹å¼ã€äº‘åŒæ­¥"})]}),e.jsxs("button",{onClick:V,className:"flex items-center gap-2 bg-slate-900 text-white px-6 py-2 rounded-lg hover:bg-slate-800 shadow-lg shadow-slate-900/20 transition-all active:scale-95",children:[T?e.jsx(re,{size:20}):e.jsx(ne,{size:20}),e.jsx("span",{children:T?"å·²ä¿å­˜!":"ä¿å­˜è®¾ç½® Save"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:"text-slate-400",size:20})," åº—é“ºä¿¡æ¯ (H5 Display)"]}),e.jsxs("button",{onClick:Q,className:"text-xs bg-slate-100 px-2 py-1 rounded hover:bg-slate-200 text-slate-600 flex items-center gap-1",children:[e.jsx(oe,{size:12})," Test Print"]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"åº—é“ºåç§° (Name)"}),e.jsx("input",{type:"text",value:r.name,onChange:s=>c({...r,name:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"åœ°å€ (Address)"}),e.jsx("input",{type:"text",value:r.address,onChange:s=>c({...r,address:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg text-sm"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"ç”µè¯ (Phone)"}),e.jsx("input",{type:"text",value:r.phone,onChange:s=>c({...r,phone:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Telegram"}),e.jsx("input",{type:"text",value:r.telegram,onChange:s=>c({...r,telegram:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"WiFi SSID"}),e.jsx("input",{type:"text",value:r.wifiSsid,onChange:s=>c({...r,wifiSsid:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"WiFi Password"}),e.jsx("input",{type:"text",value:r.wifiPassword,onChange:s=>c({...r,wifiPassword:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg",placeholder:"No password"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kitchen Printer URL / åŽ¨æˆ¿æ‰“å°æœºåœ°å€"}),e.jsx("input",{type:"text",value:r.kitchenPrinterUrl||"",onChange:s=>c({...r,kitchenPrinterUrl:s.target.value}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg",placeholder:"e.g. 192.168.1.200 or /dev/usb/lp0"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(de,{className:"text-slate-400",size:20})," èœå•åˆ†ç±»ç®¡ç† (Categories)"]}),e.jsxs("div",{className:"mb-4 flex gap-2",children:[e.jsx("input",{type:"text",value:p,onChange:s=>E(s.target.value),placeholder:"æ–°åˆ†ç±»åç§° New Category",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg focus:outline-none focus:border-slate-900"}),e.jsx("button",{onClick:Y,disabled:!p,className:"bg-slate-900 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:e.jsx(ce,{size:20})})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:m.map(s=>e.jsxs("div",{className:"flex items-center gap-2 bg-slate-100 px-3 py-1.5 rounded-lg border border-slate-200 group",children:[e.jsx("span",{className:"text-sm font-medium text-slate-700",children:s}),e.jsx("button",{onClick:()=>X(s),className:"text-slate-400 hover:text-red-500",children:e.jsx(xe,{size:14})})]},s))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(me,{className:"text-slate-400",size:20})," H5 æ”¯ä»˜æ–¹å¼é…ç½®"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:"ðŸ’³ çŽ°é‡‘æ”¯ä»˜ Cash"}),e.jsx("span",{className:"text-xs text-slate-400 bg-slate-200 px-2 py-1 rounded",children:"Always On"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:"ðŸ“± GCash"}),e.jsx("input",{type:"checkbox",checked:d.gCashEnabled,onChange:s=>h({...d,gCashEnabled:s.target.checked}),className:"w-5 h-5 text-slate-900 rounded focus:ring-slate-900"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:"ðŸ’š Maya"}),e.jsx("input",{type:"checkbox",checked:d.mayaEnabled,onChange:s=>h({...d,mayaEnabled:s.target.checked}),className:"w-5 h-5 text-slate-900 rounded focus:ring-slate-900"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:"ðŸ”µ Alipay æ”¯ä»˜å®"}),e.jsx("input",{type:"checkbox",checked:d.aliPayEnabled,onChange:s=>h({...d,aliPayEnabled:s.target.checked}),className:"w-5 h-5 text-slate-900 rounded focus:ring-slate-900"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-50 rounded-lg border border-slate-100",children:[e.jsx("span",{className:"font-medium text-slate-700 flex items-center gap-2",children:"ðŸŸ¢ WeChat Pay å¾®ä¿¡æ”¯ä»˜"}),e.jsx("input",{type:"checkbox",checked:d.weChatEnabled,onChange:s=>h({...d,weChatEnabled:s.target.checked}),className:"w-5 h-5 text-slate-900 rounded focus:ring-slate-900"})]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-slate-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-4 flex items-center gap-2",children:[e.jsx(pe,{className:"text-slate-400",size:20})," è´¢åŠ¡å‚æ•°"]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"æ±‡çŽ‡ (1 RMB = ? PHP)"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-400",children:"1 :"}),e.jsx("input",{type:"number",value:x.exchangeRate,onChange:s=>b({...x,exchangeRate:parseFloat(s.target.value)}),className:"w-full pl-8 pr-4 py-2 border border-slate-200 rounded-lg"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"æœåŠ¡è´¹çŽ‡ (%)"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",value:x.serviceCharge,onChange:s=>b({...x,serviceCharge:parseFloat(s.target.value)}),className:"w-full px-4 py-2 border border-slate-200 rounded-lg"}),e.jsx("span",{className:"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400",children:"%"})]})]})]})]}),e.jsxs("div",{className:"lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-100 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 p-4 opacity-5",children:e.jsx(C,{size:120})}),e.jsxs("h3",{className:"text-lg font-bold text-slate-800 mb-6 flex items-center gap-2",children:[e.jsx(w,{className:"text-blue-500",size:20})," æ•°æ®å­˜å‚¨ä¸Žäº‘åŒæ­¥"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mb-8",children:[e.jsxs("div",{className:"w-full md:w-64 space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"å­˜å‚¨æ–¹å¼"}),e.jsxs("button",{onClick:()=>l({...t,type:"supabase"}),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-all text-left ${t.type==="supabase"?"border-emerald-600 bg-emerald-50":"border-slate-100 hover:border-slate-300"}`,children:[e.jsx(C,{size:20,className:"text-emerald-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm text-slate-800",children:"Supabase æ•°æ®åº“"}),e.jsx("div",{className:"text-xs text-slate-500",children:"æŽ¨è / Realtime"})]})]}),e.jsxs("button",{onClick:()=>l({...t,type:"local"}),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-all text-left ${t.type==="local"?"border-slate-800 bg-slate-50":"border-slate-100 hover:border-slate-300"}`,children:[e.jsx(K,{size:20,className:"text-slate-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"æœ¬æœºç¼“å­˜"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Local Only"})]})]}),e.jsxs("button",{onClick:()=>l({...t,type:"github"}),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-all text-left ${t.type==="github"?"border-slate-800 bg-slate-50":"border-slate-100 hover:border-slate-300"}`,children:[e.jsx(G,{size:20,className:"text-slate-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"GitHub äº‘åŒæ­¥"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Git Storage"})]})]}),e.jsxs("button",{onClick:()=>l({...t,type:"s3"}),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl border-2 transition-all text-left ${t.type==="s3"?"border-slate-800 bg-slate-50":"border-slate-100 hover:border-slate-300"}`,children:[e.jsx(w,{size:20,className:"text-slate-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-sm",children:"S3 å¯¹è±¡å­˜å‚¨"}),e.jsx("div",{className:"text-xs text-slate-500",children:"Enterprise"})]})]})]}),e.jsxs("div",{className:"flex-1 bg-slate-50 rounded-xl p-6 border border-slate-200",children:[t.type==="supabase"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2 text-emerald-700",children:[e.jsx(C,{size:18})," Supabase Configuration"]}),W&&e.jsxs("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(S,{size:12})," Environment Configured"]})]}),e.jsxs("div",{className:"p-3 bg-emerald-50 text-emerald-800 text-xs rounded-lg border border-emerald-100 mb-4",children:["Directly connect to your Supabase project. Enter your Project URL and Anon Key below.",e.jsx("br",{}),"æ”¯æŒç›´è¿ž Supabase æ•°æ®åº“ï¼Œè¯·å¡«å…¥æ‚¨çš„ URL å’Œ Keyã€‚"]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Project URL"}),e.jsx("input",{type:"text",value:((U=t.supabaseConfig)==null?void 0:U.url)||"",onChange:s=>l({...t,supabaseConfig:{...t.supabaseConfig,url:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm font-mono",placeholder:"https://xyz.supabase.co"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Anon / Public Key"}),e.jsxs("div",{className:"relative",children:[e.jsx(he,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"password",value:((H=t.supabaseConfig)==null?void 0:H.key)||"",onChange:s=>l({...t,supabaseConfig:{...t.supabaseConfig,key:s.target.value}}),className:"w-full pl-8 pr-3 py-2 rounded border border-slate-300 text-sm font-mono",placeholder:"eyJhbG..."})]})]})]}),t.type==="local"&&e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-slate-500 space-y-4 py-6",children:[e.jsx(K,{size:48,className:"opacity-20"}),e.jsxs("p",{children:["æ•°æ®å­˜å‚¨åœ¨å½“å‰æµè§ˆå™¨çš„ LocalStorage ä¸­ã€‚",e.jsx("br",{}),"æ¸…ç†æµè§ˆå™¨ç¼“å­˜ä¼šå¯¼è‡´æ•°æ®ä¸¢å¤±ã€‚"]}),e.jsx("div",{className:"flex gap-4",children:e.jsxs("button",{onClick:J,className:"text-red-600 hover:underline text-sm flex items-center gap-1",children:[e.jsx(ge,{size:14})," æ¢å¤å‡ºåŽ‚è®¾ç½® (Reset)"]})})]}),t.type==="github"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[e.jsx(G,{size:18})," GitHub ä»“åº“é…ç½®"]}),_&&e.jsxs("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(S,{size:12})," Environment Configured"]})]}),e.jsx("div",{className:"p-3 bg-blue-50 text-blue-800 text-xs rounded-lg border border-blue-100 mb-4",children:_?"å·²æ£€æµ‹åˆ° Vercel çŽ¯å¢ƒå˜é‡é…ç½®ã€‚ç³»ç»Ÿå°†è‡ªåŠ¨è¿žæŽ¥åˆ°æŒ‡å®šä»“åº“ã€‚":"æŽ¨èä½¿ç”¨æ­¤æ–¹å¼ã€‚é…ç½®åŽï¼Œæ‰€æœ‰è®¢å•å’Œèœå•æ•°æ®å°†è‡ªåŠ¨ä¿å­˜åˆ°æ‚¨çš„ GitHub ç§æœ‰ä»“åº“ï¼Œå®žçŽ°å¤šå°ç”µè„‘/æ‰‹æœºæ•°æ®åŒæ­¥ã€‚"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"ç”¨æˆ·å (Owner)"}),e.jsx("input",{type:"text",value:t.githubConfig.owner,onChange:s=>l({...t,githubConfig:{...t.githubConfig,owner:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"ä»“åº“å (Repository)"}),e.jsx("input",{type:"text",value:t.githubConfig.repo,onChange:s=>l({...t,githubConfig:{...t.githubConfig,repo:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"åˆ†æ”¯ (Branch)"}),e.jsxs("div",{className:"relative",children:[e.jsx(ue,{size:14,className:"absolute left-2.5 top-1/2 -translate-y-1/2 text-slate-400"}),e.jsx("input",{type:"text",value:t.githubConfig.branch,onChange:s=>l({...t,githubConfig:{...t.githubConfig,branch:s.target.value}}),className:"w-full pl-8 pr-3 py-2 rounded border border-slate-300 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"è®¿é—®ä»¤ç‰Œ (Token)"}),e.jsx("input",{type:"password",value:t.githubConfig.token,onChange:s=>l({...t,githubConfig:{...t.githubConfig,token:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm",placeholder:"ghp_..."})]})]})]}),t.type==="s3"&&e.jsxs("div",{className:"space-y-4 animate-in fade-in",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h4",{className:"font-bold flex items-center gap-2",children:[e.jsx(w,{size:18})," S3 å¯¹è±¡å­˜å‚¨é…ç½®"]}),L&&e.jsxs("span",{className:"text-xs font-bold text-emerald-600 bg-emerald-100 px-2 py-0.5 rounded flex items-center gap-1",children:[e.jsx(S,{size:12})," Environment Configured"]}),e.jsxs("select",{value:$,onChange:s=>Z(s.target.value),className:"text-xs border border-slate-300 rounded px-2 py-1 bg-white",children:[e.jsx("option",{value:"custom",children:"è‡ªå®šä¹‰ S3"}),e.jsx("option",{value:"google",children:"Google Cloud Storage"}),e.jsx("option",{value:"cloudflare",children:"Cloudflare R2"}),e.jsx("option",{value:"minio",children:"MinIO (è‡ªå»º)"})]})]}),e.jsx("div",{className:"p-3 bg-blue-50 text-blue-800 text-xs rounded-lg border border-blue-100 mb-4",children:L?"å·²æ£€æµ‹åˆ° S3 çŽ¯å¢ƒå˜é‡é…ç½®ã€‚ç³»ç»Ÿå°†è‡ªåŠ¨è¿žæŽ¥ã€‚":"å¯è¿žæŽ¥ Cloudflare R2 (å…è´¹) æˆ– MinIO (è‡ªå»º)ã€‚"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Bucket Name"}),e.jsx("input",{type:"text",value:t.s3Config.bucket,onChange:s=>l({...t,s3Config:{...t.s3Config,bucket:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Region"}),e.jsx("input",{type:"text",value:t.s3Config.region,onChange:s=>l({...t,s3Config:{...t.s3Config,region:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Endpoint (æœåŠ¡å™¨åœ°å€)"}),e.jsx("input",{type:"text",value:t.s3Config.endpoint||"",onChange:s=>l({...t,s3Config:{...t.s3Config,endpoint:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm",placeholder:"https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Access Key ID"}),e.jsx("input",{type:"text",value:t.s3Config.accessKeyId,onChange:s=>l({...t,s3Config:{...t.s3Config,accessKeyId:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-slate-500 uppercase",children:"Secret Access Key"}),e.jsx("input",{type:"password",value:t.s3Config.secretAccessKey,onChange:s=>l({...t,s3Config:{...t.s3Config,secretAccessKey:s.target.value}}),className:"w-full px-3 py-2 rounded border border-slate-300 text-sm"})]})]})]}),t.type!=="local"&&e.jsxs("div",{className:"pt-4 mt-4 border-t border-slate-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[v==="success"&&e.jsxs("span",{className:"text-green-600 text-xs font-bold flex items-center gap-1",children:[e.jsx(be,{size:14})," è¿žæŽ¥æˆåŠŸ Connected"]}),v==="failure"&&e.jsxs("span",{className:"text-red-600 text-xs font-bold flex items-center gap-1",children:[e.jsx(fe,{size:14})," è¿žæŽ¥å¤±è´¥ Failed"]}),v==="none"&&e.jsx("span",{className:"text-slate-400 text-xs flex items-center gap-1",children:"Checking connection..."})]}),e.jsx("button",{onClick:()=>y(t),disabled:R,className:"text-sm font-medium text-slate-700 bg-white border border-slate-300 px-3 py-1.5 rounded hover:bg-slate-50 disabled:opacity-50",children:R?"æµ‹è¯•ä¸­...":"é‡è¯• Test Again"})]})]})]}),e.jsxs("div",{className:"bg-orange-50 border border-orange-100 p-4 rounded-xl flex items-start gap-3",children:[e.jsx(B,{className:"text-orange-500 shrink-0 mt-0.5",size:20}),e.jsxs("div",{className:"text-sm text-orange-800",children:[e.jsx("strong",{children:"æ•°æ®å®‰å…¨æç¤ºï¼š"}),e.jsx("br",{}),"GitHub ä»¤ç‰Œ (Token) å·²åŠ å¯†å­˜å‚¨ã€‚å¦‚éœ€æ›´æ¢è®¾å¤‡ï¼Œè¯·ç¡®ä¿å·²é€šè¿‡çŽ¯å¢ƒå˜é‡é…ç½®æˆ–è®°ä½æ‚¨çš„ Tokenã€‚"]})]})]})]}),o.open&&e.jsx("div",{className:"fixed inset-0 bg-black/60 z-[999] flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-2xl w-full max-w-md overflow-hidden shadow-2xl animate-in fade-in zoom-in-95 duration-200",children:e.jsxs("div",{className:`p-6 ${o.level==="high"?"bg-red-50":"bg-white"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:`p-3 rounded-full ${o.level==="high"?"bg-red-100 text-red-600":"bg-orange-100 text-orange-600"}`,children:o.level==="high"?e.jsx(je,{size:32}):e.jsx(B,{size:32})}),e.jsx("h3",{className:"text-xl font-bold text-slate-900",children:o.title})]}),e.jsx("p",{className:"text-slate-600 mb-6 whitespace-pre-wrap leading-relaxed",children:o.message}),o.level==="high"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 uppercase mb-2",children:'Type "RESET" to confirm'}),e.jsx("input",{type:"text",className:"w-full border-2 border-red-200 rounded-lg px-4 py-2 focus:border-red-600 focus:outline-none font-mono",placeholder:"RESET",value:N,onChange:s=>I(s.target.value)})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:()=>f({...o,open:!1}),className:"flex-1 px-4 py-3 bg-white border border-slate-300 text-slate-700 font-bold rounded-xl hover:bg-slate-50",children:"Cancel å–æ¶ˆ"}),e.jsx("button",{onClick:()=>{o.level==="high"&&N!=="RESET"||(o.action(),f({...o,open:!1}))},disabled:o.level==="high"&&N!=="RESET",className:`flex-1 px-4 py-3 text-white font-bold rounded-xl shadow-lg transition-all ${o.level==="high"?"bg-red-600 hover:bg-red-700 shadow-red-200 disabled:opacity-50 disabled:cursor-not-allowed":"bg-slate-900 hover:bg-slate-800 shadow-slate-200"}`,children:"Confirm ç¡®è®¤"})]})]})})})]})};export{Ee as default};
